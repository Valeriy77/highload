Опишите и обоснуйте технические требования к хранилищу из своего проекта (при наличии нескольких хранилищ, возьмите одно любое (при желании — несколько)), затрагивая следующие темы:
Наш проект - социальна ясеть emoji.
Реляционная структура нашего проекта:
https://github.com/Valeriy77/highload/blob/main/emoji_structure.png


Репликация (Нужна? Какого рода? Почему?)
Так как предролагается использовать MySQL на период первых 1-5 лет существования проекта, и исходя из объемов финансирования, будем использовать MS репликацию и возможностью предполагаемого расширения ММ в рамках возможностей MySQL. В нашем случае согласно CAP теоремы мы сможем обеспечить CA tolerance в ущерб Partition tolerance. В будущем по мере расширения проекта в рамках MySQL мы сможем обеспечить CP толерантность. В полседних версиях MySQL появилась групповая репликация.

Партиции (Нужны? Какие именно? Почему?)
MySQL поддерживает горизонтальное партицирование таблиц.

CREATE TABLE dialogs
.....
ENGINE = MYISAM
PARTITION BY RANGE( YEAR(time_creation) ) (
PARTITION p_old VALUES LESS THAN(2022),
PARTITION p_2022 VALUES LESS THAN(2023),
PARTITION p_2023 VALUES LESS THAN(MAXVALUE)
);

В нашем слуйчае мы будем испоьзовать разбиение на 3 партишина
Первый партишн p_old будет хранить данные за архивный период, второй — за 2022й год, и третий — все остальное. Ускорение мы увидим даже в случае выполнения запросов по всем данным во всех партиция

Также будем использовать Partition по ключу, гораздо быстрее происходит выборка по указанному полю.

TABLE messages
................
PARTITION BY KEY(id)
PARTITIONS 10;

TABLE dialogs
................
PARTITION BY KEY(id)
PARTITIONS 10;


Транзакции (Нужна ACID-модель? Если нужны, то какие? Какая изоляция нужна? Почему?)
Исходя из нашей модели, сложно редставить для чего нам понадобиться изолированось так как структура довольно простая и не предполагает одновременного изменения данных для конкретно взятого пользователя.
https://github.com/Valeriy77/highload/blob/main/emoji_structure.png
Предположим, что нам необходимо добавить возможность денежных переводов и донатов между пользователями.
в этом случае мы будем использовать Serializable isolation level для максимальной надежности во избежание Phantom read

Целостность (Какая нужна в приложении? Почему?)
В MySQL есть дескрипторы, как InnoDB и BDB, которые имеют возможность работы с транзакциями.
Мы воспользуемся механизмами регистрации MySQL, которые записывают все изменения, происходящие в базе данных, обеспечивая протоколирование и восстановлении транзакций. Таблицы типа InnoDB имеют возможность обеспечения изолированности транзакций, включающих несколько запросов.


Консенсус (Нужно ли использовать в вашей БД? Если нужно, то каким образом?)
Мы будем использовать Paxos консенсус в нашей базе, предполагаем что в будущем у нас будут денежные переводы (донаты между пользователями).Будем использовать  посердника - координатора и отправлять данные на 2 узла. Далее запрашивает готовность к фиксации, если все готовы, то фиксирует, если кто-то не отвечает или не готов, то оба откатываются. Если при фиксации ктото не ответил (после подготовки), то координатор сохранит об этом информацию в своем логе и будет повторять, пока операция не будет выполнена.

PACELC (какое хранилище нужно? Почему?)
Мы используем MySQL, который предполагает использование MySQL Cluster.
 
Для выполнения данного задания рекомендуется пересмотреть лекции 9-14.